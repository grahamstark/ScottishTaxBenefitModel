---
layout: post
date:   2022-01-01
category: Blog
tag: Tax Benefit Model
tag: Scotland
tag: Programming
title: To-Dos
author: graham_s
nav_exclude: true
---

It's like painting the Forth Bridge, this. I've got to get back to the day-job stuff that pays the bills. Here's a rough list of what I think currently needs to be done. It's a lot. There are lots of **TODOS** and **FIXMES** dotted through the code - I count 256 of them. Often these are notes about duplicate code, bad naming practices, or things that I've hard-coded which should be parameterised. Often things that need checked again.

Here are the main things, I think:

<!--more-->

### Verification 

The tests all pass, and we've got plenty of them.But we're at least Â£1bn over in income tax revenues and inequality is too low. And I haven't checked benefits against [XPlore](https://stat-xplore.dwp.gov.uk/) yet.

### Takeup

Well, I [wrote the book](https://www.ifs.org.uk/publications/1954). With the wonderful Vaness Fry. Needed for inequality especially, I think. I wonder if this stuff has moved on? Or Backwards?

### Matching

The matching in of Scottish Household Survey is very ad-hoc, and I'll likely need to go again with [LCF data](https://www.ons.gov.uk/peoplepopulationandcommunity/personalandhouseholdfinances/incomeandwealth/methodologies/livingcostsandfoodsurvey). So this all needs sorting out. There's an [R implementation](https://cran.r-project.org/web/packages/StatMatch/) of the [EuroStat approach](https://ec.europa.eu/eurostat/documents/3888793/5855821/KS-RA-13-020-EN.PDF/477dd541-92ee-4259-95d4-1c42fcf2ef34?version=1.0) that I need to either get working or (better) port to Julia.

### Pensions Data 

FRS has almost zero employer's pension contributions. That alone is likely enough to account for the extra billion in tax revenues. There are a [couple](https://www.ons.gov.uk/employmentandlabourmarket/peopleinwork/workplacepensions/datasets/annualsurveyofhoursandearningspensiontablespensiontypebyagegroupandbygrossweeklyearningsbandsp1) of [sources](https://www.gov.uk/government/publications/employers-pension-provision-survey-2017) that I could use to impute something here. probably need a literature search as well - someone must have noticed.

### Uprating, weighting and timing

* All the model data is uprated and weighted to a point in time. Which means that effectively we just skip over the pandemic (or would be if there wasn't Omicron). I'm thinking of uprating and weighting from the raw data to the corresponding month of the current year.
* The [SFC budget 2022 forecasts](https://www.fiscalcommission.scot/publications/scotlands-economic-and-fiscal-forecasts-december-2021/) need added.


### Coding

Lots needs done especially to get this into a state where other people could work on the code:

* *naming* function and structure names are inconsistent, the names of enumerations are often
way too long since they were autogenerated from the UKDS raw documentation;
* *structures* - in particular the results and household structs are constructed and named quite differently;
* *code style*: I claim to follow [blue style](https://opensourcelibs.com/lib/bluestyle) but clearly don't;
* *tests* there are plenty of them, but they don't follow the code structure anything like closely enough.

### Data

* I need to add [LCF](https://www.ons.gov.uk/peoplepopulationandcommunity/personalandhouseholdfinances/incomeandwealth/methodologies/livingcostsandfoodsurvey) data, through matching I think - Engel curves/a complete demand system is not a goer I think - I should write about why. 
* document the many problems I've found in the FRS and submit to someone;
* There's a year of FRS to add - there'll always be an extra year. 

But I suspect the TODOs will increase ..
